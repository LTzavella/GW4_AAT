"0","# Copy initiation time to a new column which contains first RT (init time) and rest of sampled RTs - 'rt'"
"0","data <- lapply(data, transform, rt = ifelse(trialcode == ""avoid_1"" | trialcode == ""avoid_2"" | trialcode == ""approach_1"" | trialcode == ""approach_2"","
"0","  values.init_time, values.aat_rt"
"0","))"
"0",""
"0","# Get unique codes for conditions (one column)"
"0","data <- lapply(data, transform, condition = ifelse(values.aat_block == ""pre"" & values.aat_trial_cat == ""fill"" & values.aat_trial_type == ""approach"", ""pre_pull_filler"","
"0","  ifelse(values.aat_block == ""pre"" & values.aat_trial_cat == ""fill"" & values.aat_trial_type == ""avoid"", ""pre_push_filler"","
"0","    ifelse(values.aat_block == ""pre"" & values.aat_trial_cat == ""go"" & values.aat_trial_type == ""approach"", ""pre_pull_go"","
"0","      ifelse(values.aat_block == ""pre"" & values.aat_trial_cat == ""go"" & values.aat_trial_type == ""avoid"", ""pre_push_go"","
"0","        ifelse(values.aat_block == ""pre"" & values.aat_trial_cat == ""nogo"" & values.aat_trial_type == ""approach"", ""pre_pull_nogo"","
"0","          ifelse(values.aat_block == ""pre"" & values.aat_trial_cat == ""nogo"" & values.aat_trial_type == ""avoid"", ""pre_push_nogo"","
"0",""
"0","            ifelse(values.aat_block == ""post"" & values.aat_trial_cat == ""fill"" & values.aat_trial_type == ""approach"", ""post_pull_filler"","
"0","              ifelse(values.aat_block == ""post"" & values.aat_trial_cat == ""fill"" & values.aat_trial_type == ""avoid"", ""post_push_filler"","
"0","                ifelse(values.aat_block == ""post"" & values.aat_trial_cat == ""go"" & values.aat_trial_type == ""approach"", ""post_pull_go"","
"0","                  ifelse(values.aat_block == ""post"" & values.aat_trial_cat == ""go"" & values.aat_trial_type == ""avoid"", ""post_push_go"","
"0","                    ifelse(values.aat_block == ""post"" & values.aat_trial_cat == ""nogo"" & values.aat_trial_type == ""approach"", ""post_pull_nogo"","
"0","                      ifelse(values.aat_block == ""post"" & values.aat_trial_cat == ""nogo"" & values.aat_trial_type == ""avoid"", ""post_push_nogo"","
"0","                        ""nan"""
"0","                      )"
"0","                    )"
"0","                  )"
"0","                )"
"0","              )"
"0","            )"
"0","          )"
"0","        )"
"0","      )"
"0","    )"
"0","  )"
"0","))"
"0",""
"0","# Subset AAT data"
"0",""
"0","AAT_data <- lapply(data, subset,"
"0","  select = c("
"0","    ""script.subjectid"", ""blockcode"", ""trialcode"", ""rt"", ""values.x"", ""values.y"", ""condition"", ""values.aat_correct"","
"0","    ""values.init_correct"", ""values.final_correct"", ""values.init_time"", ""display.canvasheight"","
"0","    ""display.canvaswidth"", ""values.initial_response"", ""values.final_response"""
"0","  ),"
"0","  (blockcode == ""pre_aat"" | blockcode == ""post_aat"") & condition != ""nan"" & trialcode != ""aat_break"" & trialcode != ""clear_screen"""
"0","  & trialcode != ""pre_aat"" & trialcode != ""post_aat"""
"0",")"
"0",""
"0","# Create unique trial numbers for both pre- and post-AAT blocks"
"0","AAT_data <- lapply(AAT_data, transform, trial = ifelse(trialcode == ""start_aat"", 1, 0))"
"0","AAT_data <- lapply(AAT_data, transform, trial = ave(trial, FUN = cumsum))"
